<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L&J Déménagement</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: #e5e7eb;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        .progress {
            height: 8px;
            background-color: #3b82f6;
            width: 0%;
            border-radius: 5px;
            transition: width 0.4s ease;
        }

        .hidden {
            display: none;
        }

        .navigation-button {
            display: inline-block;
            margin: 5px;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .next-button {
            background-color: #3b82f6;
            color: white;
        }

        .back-button {
            background-color: #a0aec0;
            color: white;
            float: right;
        }

        .whatsapp-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #25D366;
            color: white;
            border: none;
            border-radius: 50%;
            padding: 15px;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
        }

        .video-background {
            position: fixed;
            top: -1.7cm;
            left: -0.01cm;
            width: 100vw;
            height: 100vh;
            z-index: -1;
            pointer-events: none;
        }

        .video-background iframe {
            width: 120%;
            height: 120%;
            object-fit: cover;
        }

        .content-container {
            position: relative;
            z-index: 1;
            background-color: rgba(255, 255, 255, 0.01);
            padding: 20px;
            border-radius: 10px;
        }
    </style>
</head>

<body class="bg-gray-100 font-sans antialiased">
    <!-- Video Background -->
    <div class="video-background">
        <iframe width="100%" height="100%" src="https://www.youtube.com/embed/oHgKwwmO7mo?autoplay=1&mute=1&loop=1&playlist=oHgKwwmO7mo" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
    </div>

    <div class="content-container">
    <!-- Ajout des scripts EmailJS -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <script type="text/javascript">
        (function () {
            emailjs.init("es5i8pk88qOLfaaBj");
        })();
    </script>

    <!-- Page 1 : Bienvenue -->
    <div id="page1" class="max-w-xl mx-auto mt-10 bg-white bg-opacity-70 shadow-md rounded-lg overflow-hidden">
        <div class="p-6 text-center">
            <h1 class="text-2xl font-bold text-blue-600 mb-6">Rapide, Simple, Transparent Avec L&J Déménagement</h1>
            <p class="text-gray-700 mb-4">Obtenez votre devis en 5 minutes avec notre application unique en Suisse.</p>
            <p class="text-gray-700 mb-6">Répondez à 22 questions et découvrez votre prix instantanément.</p>
            <button class="bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600" onclick="showPage('page2')">Lancez votre devis maintenant</button>
            <p class="text-green-500 <p class="mt-4">138 Devis Réalisés la semaine dernière</p>
        </div>
    </div>
    <!-- Page 2 : Formulaire de Devis -->
    <div id="page2" class="max-w-xl mx-auto mt-10 bg-white bg-opacity-80 shadow-md rounded-lg overflow-hidden hidden">
        <div class="p-6">
            <h1 class="text-2xl font-bold text-center text-blue-600 mb-6">Votre Déménagement Commence ici</h1>
            <div class="progress-bar">
                <div id="progress" class="progress"></div>
            </div>
            <form id="devisForm" onsubmit="return false;">
                <!-- Questions du formulaire -->
                <div class="form-group mb-4" data-question="1">
                    <label for="nom_prenom" class="block text-gray-700">1. Nom et Prénom :</label>
                    <input type="text" id="nom_prenom" class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" placeholder="Votre nom et prénom" required>
                    <div class="flex justify-between">
                        <button type="button" class="navigation-button next-button" onclick="nextQuestion()">Suivant</button>
                    </div>
                </div>
                <div class="form-group mb-4 hidden" data-question="2">
                    <label for="email" class="block text-gray-700">2. E-mail :</label>
                    <input type="email" id="email" class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" placeholder="Votre email" required>
                    <div class="flex justify-between">
                        <button type="button" class="navigation-button back-button" onclick="previousQuestion()">Retour</button>
                        <button type="button" class="navigation-button next-button" onclick="nextQuestion()">Suivant</button>
                    </div>
                </div>
                <div class="form-group mb-4 hidden" data-question="3">
                    <label for="telephone" class="block text-gray-700">3. Numéro de Téléphone :</label>
                    <input type="tel" id="telephone" class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" placeholder="Votre numéro de téléphone" required>
                    <div class="flex justify-between">
                        <button type="button" class="navigation-button back-button" onclick="previousQuestion()">Retour</button>
                        <button type="button" class="navigation-button next-button" onclick="nextQuestion()">Suivant</button>
                    </div>
                </div>
                <div class="form-group mb-4 hidden" data-question="4">
                    <label for="adresse_actuelle" class="block text-gray-700">4. Adresse Actuelle :</label>
                    <input type="text" id="adresse_actuelle" class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" placeholder="Votre adresse actuelle" required>
                    <div class="flex justify-between">
                        <button type="button" class="navigation-button back-button" onclick="previousQuestion()">Retour</button>
                        <button type="button" class="navigation-button next-button" onclick="nextQuestion()">Suivant</button>

                    </div>
                </div>
                <div class="form-group mb-4 hidden" data-question="5">
                    <label for="adresse_future" class="block text-gray-700">5. Adresse Future :</label>
                    <input type="text" id="adresse_future" class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" placeholder="Votre future adresse" required>
                    <div class="flex justify-between">
                        <button type="button" class="navigation-button back-button" onclick="previousQuestion()">Retour</button>
                        <button type="button" class="navigation-button next-button" onclick="nextQuestion()">Suivant</button>
                    </div>
                </div>
                <div class="form-group mb-4 hidden" data-question="6">
                    <label for="statut" class="block text-gray-700">6. Statut :</label>
                    <select id="statut" class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" required>
                        <option value="" disabled selected>Choisissez…</option>
                        <option value="Particulier">Particulier</option>
                        <option value="Entreprise">Entreprise</option>
                        <option value="Autre">Autre</option>
                    </select>
                    <div class="flex justify-between">
                        <button type="button" class="navigation-button back-button" onclick="previousQuestion()">Retour</button>
                        <button type="button" class="navigation-button next-button" onclick="nextQuestion()">Suivant</button>
                    </div>
                </div>
                <div class="form-group mb-4 hidden" data-question="7">
                    <label for="formule" class="block text-gray-700">7. Choisissez la formule qui vous correspond pour votre Déménagement :</label>
                    <select id="formule" class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" required>
                        <option value="" disabled selected>Choisissez…</option>
                        <option value="economique">Formule Économique</option>
                        <option value="premium">Formule Premium</option>
                        <option value="prestige">Formule Prestige</option>
                    </select>
                    <div class="flex justify-between">
                        <button type="button" class="navigation-button back-button" onclick="previousQuestion()">Retour</button>
                        <button type="button" class="navigation-button next-button" onclick="nextQuestion()">Suivant</button>
                    </div>
                </div>
                <div class="form-group mb-4 hidden" data-question="8">
                    <label for="objet" class="block text-gray-700">8. Styles d'objet :</label>
                    <select id="objet" class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" required>
                        <option value="" disabled selected>Choisissez…</option>
                        <option value="Appartement">Appartement</option>
                        <option value="Maison">Maison</option>
                        <option value="Locaux">Locaux</option>
                        <option value="Autre">Autre</option>
                    </select>
                    <div class="flex justify-between">
                        <button type="button" class="navigation-button back-button" onclick="previousQuestion()">Retour</button>
                        <button type="button" class="navigation-button next-button" onclick="nextQuestion()">Suivant</button>
                    </div>
                </div>
                <div class="form-group mb-4 hidden" data-question="9">
                    <label for="pieces" class="block text-gray-700">9. Nombre de Pièces :</label>
                    <select id="pieces" class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" required>
                        <option value="" disabled selected>Choisissez…</option>
                        <option value="studio">Studio</option>
                        <option value="une_piece">Une pièce</option>
                        <option value="deux_pieces">Deux pièces</option>
                        <option value="trois_pieces">Trois pièces</option>
                        <option value="quatre_pieces">Quatre pièces</option>
                        <option value="cinq_pieces">Cinq pièces</option>
                        <option value="six_pieces">Six pièces</option>
                        <option value="sept_pieces">Sept pièces</option>
                        <option value="huit_pieces">Huit pièces</option>
                        <option value="neuf_pieces">Neuf pièces</option>
                        <option value="dix_pieces">Dix pièces</option>
                    </select>
                    <div class="flex justify-between">
                        <button type="button" class="navigation-button back-button" onclick="previousQuestion()">Retour</button>
                        <button type="button" class="navigation-button next-button" onclick="nextQuestion()">Suivant</button>
                    </div>
                </div>
                <div class="form-group mb-4 hidden" data-question="10">
                    <label for="nettoyage" class="block text-gray-700">10. Nettoyage :</label>
                    <select id="nettoyage" class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" required>
                        <option value="" disabled selected>Choisissez…</option>
                        <option value="0">Pas de nettoyage</option>
                        <option value="30_49">30 m² à 49 m²</option>
                        <option value="50_69">50 m² à 69 m²</option>
                        <option value="70_89">70 m² à 89 m²</option>
                        <option value="90_109">90 m² à 109 m²</option>
                        <option value="110_129">110 m² à 129 m²</option>
                        <option value="130_149">130 m² à 149 m²</option>
                        <option value="150_169">150 m² à 169 m²</option>
                        <option value="170_189">170 m² à 189 m²</option>
                        <option value="190_209">190 m² à 209 m²</option>
                        <option value="210_229">210 m² à 229 m²</option>
                        <option value="230_249">230 m² à 249 m²</option>
                        <option value="250_269">250 m² à 269 m²</option>
                        <option value="270_289">270 m² à 289 m²</option>
                        <option value="290_309">290 m² à 309 m²</option>
                    </select>
                    <div class="flex justify-between">
                        <button type="button" class="navigation-button back-button" onclick="previousQuestion()">Retour</button>
                        <button type="button" class="navigation-button next-button" onclick="nextQuestion()">Suivant</button>
                    </div>
                </div>
                <div class="form-group mb-4 hidden" data-question="11">
                    <label for="distance" class="block text-gray-700">11. Distance :</label>
                    <select id="distance" class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" required>
                        <option value="" disabled selected>Choisissez…</option>
                        <option value="0_10">0-10 km</option>
                        <option value="11_30">11-30 km</option>
                        <option value="31_60">31-60 km</option>
                        <option value="61_90">61-90 km</option>
                        <option value="91_120">91-120 km</option>
                    </select>
                    <div class="flex justify-between">
                        <button type="button" class="navigation-button back-button" onclick="previousQuestion()">Retour</button>
                        <button type="button" class="navigation-button next-button" onclick="nextQuestion()">Suivant</button>
                    </div>
                </div>
                <div class="form-group mb-4 hidden" data-question="12">
                    <label for="lit_adulte" class="block text-gray-700">12. Nombre de Lits Adultes :</label>
                    <select id="lit_adulte" class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" required>
                        <option value="" disabled selected>Choisissez…</option>
                        <option value="0">0</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                    </select>
                    <div class="flex justify-between">
                        <button type="button" class="navigation-button back-button" onclick="previousQuestion()">Retour</button>
                        <button type="button" class="navigation-button next-button" onclick="nextQuestion()">Suivant</button>
                    </div>
                </div>
                <div class="form-group mb-4 hidden" data-question="13">
                    <label for="lit_enfant" class="block text-gray-700">13. Nombre de Lits Enfants :</label>
                    <select id="lit_enfant" class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" required>
                        <option value="" disabled selected>Choisissez…</option>
                        <option value="0">0</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                    </select>
                    <div class="flex justify-between">
                        <button type="button" class="navigation-button back-button" onclick="previousQuestion()">Retour</button>
                        <button type="button" class="navigation-button next-button" onclick="nextQuestion()">Suivant</button>
                    </div>
                </div>
                <div class="form-group mb-4 hidden" data-question="14">
                    <label for="meubles" class="block text-gray-700">14. Nombre de Meubles :</label>
                    <select id="meubles" class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" required>
                        <option value="" disabled selected>Choisissez…</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                    </select>
                    <div class="flex justify-between">
                        <button type="button" class="navigation-button back-button" onclick="previousQuestion()">Retour</button>
                        <button type="button" class="navigation-button next-button" onclick="nextQuestion()">Suivant</button>
                    </div>
                </div>
                <div class="form-group mb-4 hidden" data-question="15">
                    <label for="canape" class="block text-gray-700">15. Nombre de Canapés :</label>
                    <select id="canape" class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" required>
                        <option value="" disabled selected>Choisissez…</option>
                        <option value="0">0</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                    </select>
                    <div class="flex justify-between">
                        <button type="button" class="navigation-button back-button" onclick="previousQuestion()">Retour</button>
                        <button type="button" class="navigation-button next-button" onclick="nextQuestion()">Suivant</button>
                    </div>
                </div>
                <div class="form-group mb-4 hidden" data-question="16">
                    <label for="frigo" class="block text-gray-700">16. Nombre de Frigos :</label>
                    <select id="frigo" class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" required>
                        <option value="" disabled selected>Choisissez…</option>
                        <option value="0">0</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                    </select>
                    <div class="flex justify-between">
                        <button type="button" class="navigation-button back-button" onclick="previousQuestion()">Retour</button>
                        <button type="button" class="navigation-button next-button" onclick="nextQuestion()">Suivant</button>
                    </div>
                </div>
                <div class="form-group mb-4 hidden" data-question="17">
                    <label for="balcon" class="block text-gray-700">17. Balcon :</label>
                    <select id="balcon" class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" required>
                        <option value="" disabled selected>Choisissez…</option>
                        <option value="oui">Oui</option>
                        <option value="non">Non</option>
                    </select>
                    <div class="flex justify-between">
                        <button type="button" class="navigation-button back-button" onclick="previousQuestion()">Retour</button>
                        <button type="button" class="navigation-button next-button" onclick="nextQuestion()">Suivant</button>
                    </div>
                </div>
                <div class="form-group mb-4 hidden" data-question="18">
                    <label for="cave" class="block text-gray-700">18. Cave :</label>
                    <select id="cave" class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" required>
                        <option value="" disabled selected>Choisissez…</option>
                        <option value="oui">Oui</option>
                        <option value="non">Non</option>
                    </select>
                    <div class="flex justify-between">
                        <button type="button" class="navigation-button back-button" onclick="previousQuestion()">Retour</button>
                        <button type="button" class="navigation-button next-button" onclick="nextQuestion()">Suivant</button>
                    </div>
                </div>
                <div class="form-group mb-4 hidden" data-question="19">
                    <label for="acces" class="block text-gray-700">19. Accès Facile :</label>
                    <select id="acces" class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" required>
                        <option value="" disabled selected>Choisissez…</option>
                        <option value="oui">Oui</option>
                        <option value="non">Non</option>
                    </select>
                    <div class="flex justify-between">
                        <button type="button" class="navigation-button back-button" onclick="previousQuestion()">Retour</button>
                        <button type="button" class="navigation-button next-button" onclick="nextQuestion()">Suivant</button>
                    </div>
                </div>
                <div class="form-group mb-4 hidden" data-question="20">
                    <label for="ascenseur" class="block text-gray-700">20. Présence d'un Ascenseur :</label>
                    <select id="ascenseur" class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" required>
                        <option value="" disabled selected>Choisissez…</option>
                        <option value="oui">Oui</option>
                        <option value="non">Non</option>
                    </select>
                    <div class="flex justify-between">
                        <button type="button" class="navigation-button back-button" onclick="previousQuestion()">Retour</button>
                        <button type="button" class="navigation-button next-button" onclick="nextQuestion()">Suivant</button>
                    </div>
                </div>
                <div class="form-group mb-4 hidden" data-question="21">
                    <label for="monte_charge" class="block text-gray-700">21. Usage de Monte-charge :</label>
                    <select id="monte_charge" class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" required>
                        <option value="" disabled selected>Choisissez…</option>
                        <option value="oui">Oui</option>
                        <option value="non">Non</option>
                    </select>
                    <div class="flex justify-between">
                        <button type="button" class="navigation-button back-button" onclick="previousQuestion()">Retour</button>
                        <button type="button" class="navigation-button next-button" onclick="nextQuestion()">Suivant</button>
                    </div>
                </div>
                <div class="form-group mb-4 hidden" data-question="22">
                    <label for="commentaires" class="block text-gray-700">22. Commentaires Supplémentaires :</label>
                    <input type="text" id="commentaires" class="w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" placeholder="Toute information supplémentaire">
                    <div class="flex justify-between">
                        <button type="button" class="navigation-button back-button" onclick="previousQuestion()">Retour</button>
                        <button type="button" class="navigation-button next-button" onclick="validateForm()">Soumettre le devis</button>
                    </div>
                </div>
            </form>
            <p id="resultat" class="mt-4 text-xl text-center"></p>
            <div class="error-message text-red-500 hidden" id="error-message">Veuillez remplir tous les champs requis.</div>
            <div class="confirmation-message text-green-500 hidden" id="confirmation-message">Confirmation de l'envoi</div>
        </div>
    </div>

    <!-- Page 3 : Résultat du Devis et Remerciements -->
<div id="page3" class="max-w-xl mx-auto mt-10 bg-white shadow-md rounded-lg overflow-hidden hidden">
        <div class="p-6 text-center">
            <h1 class="text-2xl font-bold text-blue-600 mb-6">Votre Déménagement Pour Seulement <span id="prixDevis"></span> CHF</h1>
            <p class="text-gray-700 mb-6">Nous sommes impatients de vous rencontrer et de vous offrir le meilleur service possible.</p>
            <p>Votre Déménagement Pour Seulement <span id="prixDevis"></span> CHF</p>
            <button class="bg-green-500 text-white py-2 px-4 mb-4 rounded-md hover:bg-green-600" onclick="markContacted()">Être Contacté par un agent de L&J Déménagement</button>
            <div class="mb-4">
                <button class="bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600" onclick="window.location.href='https://ljdemenagement.wordpress.com/'">Site Web</button>
                <button class="bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600" onclick="window.location.href='https://ljdemenagement.wordpress.com/contactez-nous/'">Page de Contact</button>
            </div>
            <p>Votre avis compte ! <a href="https://g.co/kgs/Cug2Dpz" target="_blank" class="text-blue-500 hover:underline">Laissez un feedback sur Google.</a></p>
        </div>
    </div>

    <div id="confirmation-message" class="notification hidden"></div>
    <div id="notification" class="notification hidden"></div>

    <script>
        let currentQuestion = 1;
        const totalQuestions = 22;

        function showPage(page) {
            document.getElementById('page1').classList.add('hidden');
            document.getElementById('page2').classList.add('hidden');
            document.getElementById('page3').classList.add('hidden');
            document.getElementById(page).classList.remove('hidden');
        }

        function nextQuestion() {
            document.querySelector(`[data-question="${currentQuestion}"]`).classList.add('hidden');
            currentQuestion++;
            if (currentQuestion <= totalQuestions) {
                document.querySelector(`[data-question="${currentQuestion}"]`).classList.remove('hidden');
            }
            updateProgressBar();
        }

        function previousQuestion() {
            if (currentQuestion > 1) {
                document.querySelector(`[data-question="${currentQuestion}"]`).classList.add('hidden');
                currentQuestion--;
                document.querySelector(`[data-question="${currentQuestion}"]`).classList.remove('hidden');
            } else {
                showPage('page1');
            }
            updateProgressBar();
        }

        function updateProgressBar() {
            const progress = (currentQuestion / totalQuestions) * 100;
            document.getElementById('progress').style.width = `${progress}%`;
        }

        function validateForm() {
            const email = document.getElementById('email').value;
            const telephone = document.getElementById('telephone').value;

            if (!email || !telephone) {
                document.getElementById('error-message').style.display = 'block';
                setTimeout(() => {
                    document.getElementById('error-message').style.display = 'none';
                }, 3000);
                return;
            }

            const cost = calculateCost();
            saveForm(cost);
        }

        function calculateCost() {
            let cost = 0;
            const formule = document.getElementById('formule').value;
            const pieces = document.getElementById('pieces').value;
            const nettoyage = document.getElementById('nettoyage').value;
            const distance = document.getElementById('distance').value;
            const lit_adulte = document.getElementById('lit_adulte').value;
            const lit_enfant = document.getElementById('lit_enfant').value;
            const meubles = document.getElementById('meubles').value;
            const canape = document.getElementById('canape').value;
            const frigo = document.getElementById('frigo').value;
            const balcon = document.getElementById('balcon').value;
            const cave = document.getElementById('cave').value;
            const acces = document.getElementById('acces').value;
            const ascenseur = document.getElementById('ascenseur').value;

            if (formule === 'economique') cost += 300;
            else if (formule === 'premium') cost += 500;
            else if (formule === 'prestige') cost += 700;

            if (pieces === 'studio') cost += 450;
            else if (pieces === 'une_piece') cost += 600;
            else if (pieces === 'deux_pieces') cost += 900;
            else if (pieces === 'trois_pieces') cost += 1250;
            else if (pieces === 'quatre_pieces') cost += 1550;
            else if (pieces === 'cinq_pieces') cost += 1850;
            else if (pieces === 'six_pieces') cost += 2000;
            else if (pieces === 'sept_pieces') cost += 2350;
            else if (pieces === 'huit_pieces') cost += 2600;
            else if (pieces === 'neuf_pieces') cost += 2850;
            else if (pieces === 'dix_pieces') cost += 3100;

            if (nettoyage === '30_49') cost += 350;
            else if (nettoyage === '50_69') cost += 450;
            else if (nettoyage === '70_89') cost += 600;
            else if (nettoyage === '90_109') cost += 750;
            else if (nettoyage === '110_129') cost += 900;
            else if (nettoyage === '130_149') cost += 1000;
            else if (nettoyage === '150_169') cost += 1200;
            else if (nettoyage === '170_189') cost += 1400;
            else if (nettoyage === '190_209') cost += 1600;
            else if (nettoyage === '210_229') cost += 1800;
            else if (nettoyage === '230_249') cost += 2000;
            else if (nettoyage === '250_269') cost += 2200;
            else if (nettoyage === '270_289') cost += 2400;
            else if (nettoyage === '290_309') cost += 2600;

            if (distance === '0_10') cost += 50;
            else if (distance === '11_30') cost += 70;
            else if (distance === '31_60') cost += 90;
            else if (distance === '61_90') cost += 110;
            else if (distance === '91_120') cost += 140;

            if (lit_adulte === '1') cost += 150;
            else if (lit_adulte === '2') cost += 200;
            else if (lit_adulte === '3') cost += 300;

            if (lit_enfant === '1') cost += 0;
            else if (lit_enfant === '2') cost += 50;
            else if (lit_enfant === '3') cost += 100;
            else if (lit_enfant === '4') cost += 150;

            if (meubles === '1') cost += 200;
            else if (meubles === '2') cost += 350;
            else if (meubles === '3') cost += 500;
            else if (meubles === '4') cost += 600;

            if (canape === '1') cost += 0;
            else if (canape === '2') cost += 150;
            else if (canape === '3') cost += 200;

            if (frigo === '1') cost += 150;
            else if (frigo === '2') cost += 250;

            if (balcon === 'oui') cost += 100;
            if (cave === 'oui') cost += 100;
            if (acces === 'oui') cost += 200;

            if (ascenseur === 'oui') cost += 39;
            else if (ascenseur === 'non') cost += 150;

            document.getElementById('prixDevis').innerText = cost; // Affiche le coût dans l'élément prixDevis
            return cost;
        }

        function saveForm(cost) {
            const formDetails = {
                Nom_prenom: document.getElementById('nom_prenom').value,
                Email: document.getElementById('email').value,
                Telephone: document.getElementById('telephone').value,
                Adresse_actuelle: document.getElementById('adresse_actuelle').value,
                Adresse_future: document.getElementById('adresse_future').value,
                Statut: document.getElementById('statut').value,
                Formule: document.getElementById('formule').value,
                Objet: document.getElementById('objet').value,
                Pieces: document.getElementById('pieces').value,
                Nettoyage: document.getElementById('nettoyage').value,
                Distance: document.getElementById('distance').value,
                Lit_adulte: document.getElementById('lit_adulte').value,
                Lit_enfant: document.getElementById('lit_enfant').value,
                Canape: document.getElementById('canape').value,
                Frigo: document.getElementById('frigo').value,
                Meubles: document.getElementById('meubles').value,
                Balcon: document.getElementById('balcon').value,
                Cave: document.getElementById('cave').value,
                Acces: document.getElementById('acces').value,
                Ascenseur: document.getElementById('ascenseur').value,
                Monte_charge: document.getElementById('monte_charge').value,
                Commentaires: document.getElementById('commentaires').value,
                Estimated_cost: cost
            };

            emailjs.send("service_wd4pvu4", "template_e3f3f4p", {
                To_email: formDetails.Email,
                From_name: "L&J Déménagement",
                Reply_to: formDetails.Email,
                Cc: "ljdemenagement@etik.com",
                Subject: "Demande de devis de L&J Déménagement",
                Message: `Merci pour votre demande de devis ! Voici un récapitulatif de vos réponses : ${JSON.stringify(formDetails, null, 2)}`
            }).then((response) => {
                console.log('SUCCESS!', response.status, response.text);
                showConfirmationMessage();
                showPage('page3');
            }, (err) => {
                console.error('FAILED...', err);
                showNotification("Échec de l'envoi du formulaire.", 'error');
            });
        }

        function showConfirmationMessage() {
            const confirmationMessage = document.getElementById('confirmation-message');
            confirmationMessage.style.display = 'block';
            confirmationMessage.innerText = "Confirmation de l'envoi";
            setTimeout(() => {
                confirmationMessage.style.display = 'none';
            }, 3000);
        }

        function markContacted() {
            const email = document.getElementById('email').value;

            emailjs.send("service_wd4pvu4", "template_e3f3f4p", {
                Reply_to: email,
                From_name: "L&J Déménagement",
                Subject: "Demande de contact",
                Message: "Vous serez contacté par un agent de L&J Déménagement."
            }).then((response) => {
                console.log('SUCCESS!', response.status, response.text);
                alert('Votre demande a été envoyée avec succès !');
            }, (err) => {
                console.error('FAILED...', err);
                alert("Échec de l'envoi de la demande.");
            });
        }

        function showNotification(message, type) {
            const notification = document.getElementById('notification');
            notification.className = `notification ${type}`;
            notification.innerText = message;
            notification.style.display = 'block';
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }

        // Bouton WhatsApp
        const whatsappButton = document.createElement('a');
        whatsappButton.href = "https://api.whatsapp.com/send?phone=41787493594";
        whatsappButton.target = "_blank";
        whatsappButton.innerHTML = '<button class="whatsapp-button"><i class="fab fa-whatsapp"></i></button>';
        document.body.appendChild(whatsappButton);
    </script>
</body>
</html>
